"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1836],{61836:function(e,r,t){t.d(r,{Z:function(){return H}});var n=t(43873),o=t(77826),i=t(71076),s=t(63752),a=t(10557),l=t(21146),c=t(72081),u=t(23761),d=t(72585),g=t(31564),p=t(28642),f=t(20266),b=t.n(f),h=t(66668),j=t(78336),x=t(88009),y=t(45030),m=t(52983),v=t(62789),O=t.n(v),w=t(18648),Z=t(67485),k=t.n(Z),C=t(92429),D=t(4018),P=t(67833),E=t(1946),S=t(89210),L=t(46618),A=t(70729),R=t(72303),M=t(74869),B=t(94541),I=t(97458);function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function G(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var F=k()((function(){return t.e(3315).then(t.bind(t,93315))}),{loadableGenerated:{webpack:function(){return[93315]}}}),q=w.Ry().shape({email:w.Z_().matches(/^\S+$/,"emailAddressError").required("login.emailAddressRequired").transform((function(e){return e.trim()})).default(""),password:w.Z_().required("login.passwordRequired").default("")}),U=O()().publicRuntimeConfig,W=L.FU.CREDENTIALS,T=L.FU.FACEBOOK,N=L.FU.GOOGLE,z=function(e,r){var t=e.locale,n=e.pathname,o=e.query;return e.push({pathname:n,query:G(G({},o),{},{error:r})},null,{locale:t})};function H(e){var r,t=e.makeStyles,p=e.nextPagePath,f=e.hideContinueWithFacebook,v=e.showContinueWithGoogle,O=(0,C.wx)(),w=(0,y.useRouter)(),Z=w.locale,k=(0,E.D)().sendAlert,L=q.getDefault(),_=(0,h.cI)({defaultValues:L,resolver:(0,j.X)(q),mode:"onTouched"}),H=_.register,V=_.reset,K=_.handleSubmit,X=_.formState.errors,$=(0,m.useState)(!1),J=$[0],Q=$[1],Y=(0,m.useState)(null),ee=Y[0],re=Y[1],te=(0,m.useState)(!1),ne=te[0],oe=te[1],ie=(0,m.useState)({credentials:{loading:!1,disabled:!1},facebook:{loading:!1,disabled:!1},google:{loading:!1,disabled:!1}}),se=ie[0],ae=ie[1],le=(0,m.useState)(w.query.callbackUrl),ce=le[0],ue=le[1],de=(0,S.p)({url:ce||p||"",baseUrl:U.baseUrl,locale:w.locale}),ge=(0,D.Fu)(Z),pe="https://support.myfitnesspal.com/hc/".concat(ge,"/articles/360032625071-Eating-Disorder-Resources"),fe=function(e){var r={credentials:{loading:!1,disabled:!0},facebook:{loading:!1,disabled:!0},google:{loading:!1,disabled:!0}};r[e].loading=!0,ae(r)},be=function(){ae({credentials:{loading:!1,disabled:!1},facebook:{loading:!1,disabled:!1},google:{loading:!1,disabled:!1}})},he=(0,m.useMemo)((function(){return t(se.credentials.loading||se.facebook.loading||se.google.loading)}),[se.credentials.loading,se.facebook.loading,se.google.loading,t]),je=function(){var e=(0,g.Z)(b().mark((function e(r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),fe(r),e.next=4,(0,x.signIn)(r,{callbackUrl:de});case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),xe=function(){var e=(0,g.Z)(b().mark((function e(r,t){var n,o,i,s,a,l,c,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.email,i=r.password,s=new FormData(t.target),a=(null===(n=s.get("cf-turnstile-response"))||void 0===n?void 0:n.toString())||null,fe(W),e.prev=4,e.next=7,(0,x.signIn)(W,{username:o,password:i,redirect:!1,turnstile_token:a});case 7:return l=e.sent,e.next=10,(0,x.getSession)();case 10:if(c=e.sent,u=(null===c||void 0===c?void 0:c.locale)||w.locale,!c){e.next=17;break}return e.next=15,(0,P.D9)("login",O,k);case 15:e.next=19;break;case 17:return be(),e.abrupt("return",z(w,l.error));case 19:return e.abrupt("return",window.location.assign((0,D.mC)(de,u,w)));case 22:e.prev=22,e.t0=e.catch(4),be();case 25:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(r,t){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){var e,r,t,n={MobileClientError:O("login.error"),ServerError:O("login.serverError"),Signin:O("login.oAuthError"),OAuthSignin:O("login.oAuthError"),OAuthCallback:O("login.oAuthError"),OAuthCreateAccount:O("login.oAuthError"),Callback:O("login.oAuthError"),OAuthAccountNotLinked:O("login.oAuthAccountNotLinkedError"),CredentialsSignin:O("login.error"),RecaptchaFailed:O("login.recaptchaFailed"),UnderageRestricted:O("accountRestrictedErrorMessage",{termsLink:(0,I.jsx)(d.Z,{variant:"Body/Regular/MD",children:(0,I.jsx)(B.Z,{sx:he.link,target:"_blank",href:"/terms-of-service",children:O("privacyandterms.termsAndConditions")})}),communityGuidelinesLink:(0,I.jsx)(d.Z,{variant:"Body/Regular/MD",children:(0,I.jsx)(B.Z,{sx:he.link,target:"_blank",href:"/terms-of-service",children:O("footer.communityGuidelines")})}),specificErrorMessage:O("underageErrorMessage",{nutritionLink:(0,I.jsx)(d.Z,{variant:"Body/Regular/MD",children:(0,I.jsx)(B.Z,{sx:he.link,target:"_blank",href:"https://www.nutrition.gov/",children:"nutrition.gov"})})})}),EatingDisorderRestricted:O("accountRestrictedErrorMessage",{termsLink:(0,I.jsx)(d.Z,{variant:"Body/Regular/MD",children:(0,I.jsx)(B.Z,{sx:he.link,target:"_blank",href:"/terms-of-service",children:O("privacyandterms.termsAndConditions")})}),communityGuidelinesLink:(0,I.jsx)(d.Z,{variant:"Body/Regular/MD",children:(0,I.jsx)(B.Z,{sx:he.link,target:"_blank",href:"/community-guidelines",children:O("footer.communityGuidelines")})}),specificErrorMessage:O("eatingDisorderErrorMessage",{supportLink:(0,I.jsx)(d.Z,{variant:"Body/Regular/MD",children:(0,I.jsx)(B.Z,{sx:he.link,target:"_blank",href:pe,children:pe})})})}),ContinueWithGoogleError:O("login.googleAccountDoesNotExist",{style:function(e){return(0,I.jsx)(d.Z,{variant:"Heading/Semibold/SM",display:"block",children:e})},link:(0,I.jsx)(d.Z,{variant:"Body/Regular/MD",children:(0,I.jsx)(B.Z,{href:"/account/create/welcome",sx:he.link,children:O("accountMenu.signUp")})})})};n[null===(e=w.query)||void 0===e?void 0:e.error]?re(n[null===(t=w.query)||void 0===t?void 0:t.error]):null!==(r=w.query)&&void 0!==r&&r.error?re(O("login.serverError")):re(null)}),[O,null===(r=w.query)||void 0===r?void 0:r.error,pe,he.link]),(0,m.useEffect)((function(){ne&&V()}),[ne,V]),(0,m.useEffect)((function(){if(/apps/.test(ce)){var e=new URL("".concat(U.baseUrl,"/").concat(w.locale,"/apps/logged_in_index")).toString();ue(e)}}),[ce,w.locale]),(0,I.jsxs)(o.Z,{sx:he.container,"data-testid":"login-form",component:"form",onSubmit:K((function(e,r){return xe(e,r)})),children:[ee&&(0,I.jsx)(u.Z,{sx:he.alert,severity:"error",children:ee}),(0,I.jsxs)(o.Z,{sx:he.inputContainer,children:[(0,I.jsx)(c.Z,G(G({},H("email")),{},{autoComplete:"email",error:!!X.email,label:O("emailAddressCapitalized"),placeholder:O("emailAddressCapitalized"),id:"email",variant:"outlined",sx:he.input,InputProps:{style:he.inputRoot},fullWidth:!0})),!!X.email&&(0,I.jsx)(d.Z,{sx:he.error,color:"error",component:"p",variant:"Body/Regular/MD",role:"alert",children:O(X.email.message)}),(0,I.jsx)(c.Z,G(G({},H("password")),{},{autoComplete:"current-password",error:!!X.password,label:O("login.password"),placeholder:O("login.password"),id:"password",type:J?"text":"password",variant:"outlined",sx:G(G({},he.input),he.passwordInput),InputProps:{style:he.inputRoot,endAdornment:(0,I.jsx)(i.Z,{position:"end",children:(0,I.jsx)(s.Z,{onClick:function(){Q(!J)},edge:"end","aria-label":O(J?"hidePassword":"showPassword"),children:J?(0,I.jsx)(l.Z,{}):(0,I.jsx)(a.Z,{})})})},fullWidth:!0})),!!X.password&&(0,I.jsx)(d.Z,{sx:he.error,color:"error",component:"p",variant:"Body/Regular/MD",role:"alert",children:O(X.password.message)}),(0,I.jsx)(d.Z,{color:"textSecondary",variant:"Body/Regular/MD",component:"p",gutterBottom:!0,children:(0,I.jsx)(B.Z,{sx:he.forgotPassword,href:"/account/forgot-password",children:O("login.forgotPassword")})})]}),U.recaptcha.enabled&&(0,I.jsx)(o.Z,{sx:{width:300,mx:"auto",mt:5},children:(0,I.jsx)(F,{action:"login"})}),(0,I.jsxs)(o.Z,{sx:he.buttonWrapper,children:[(0,I.jsx)(A.Z,{fullWidth:!0,loading:se.credentials.loading,disabled:se.credentials.disabled||se.credentials.loading||se.facebook.loading||se.google.loading,sx:G(G({},he.button),he.loginButton),endIcon:(0,I.jsx)(n.Z,{}),type:"submit",children:(0,I.jsx)(d.Z,{variant:"Button/Titlecase/LG",children:O("logIn")})}),(!f||v)&&(0,I.jsx)(d.Z,{sx:he.orText,children:O("or")}),v&&(0,I.jsx)(M.Z,{customStyles:G(G({},he.button),he.googleButton),onClick:function(){return je(N)},isLoading:se.google.loading,isDisabled:se.google.disabled,children:(0,I.jsx)(d.Z,{variant:"Button/Titlecase/LG",sx:he.continueButtonText,children:O("continueWithGoogle")})}),!f&&(0,I.jsx)(R.Z,{customStyles:G(G({},he.button),he.facebookButton),onClick:function(){return je(T)},isLoading:se.facebook.loading,isDisabled:se.facebook.disabled||se.google.loading||se.credentials.loading,children:(0,I.jsx)(d.Z,{variant:"Button/Titlecase/LG",sx:he.continueButtonText,children:O("continueWithFB")})})]})]})}},72303:function(e,r,t){var n=t(2757),o=t(95552),i=t(28642),s=t(70729),a=t(97458),l=["children","isLoading","isDisabled","customStyles"];function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.children,t=e.isLoading,i=e.isDisabled,c=e.customStyles,d=(0,o.Z)(e,l),g=function(e,r){var t=e?"center":r.justifyContent,n=e?"none":"inline";return{button:u(u({},r),{},{justifyContent:t}),facebookIcon:{fontSize:"23px",color:"common.neutrals.white",display:n}}}(t,c);return(0,a.jsx)(s.Z,u(u({sx:g.button,fullWidth:!0,startIcon:(0,a.jsx)(n.Z,{sx:g.facebookIcon}),loading:t,disabled:i},d),{},{children:r}))}},74869:function(e,r,t){t.d(r,{Z:function(){return f}});var n=t(95552),o=t(28642),i=t(3120),s=t(97458);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var c=function(e){return(0,s.jsxs)(i.Z,l(l({},e),{},{children:[(0,s.jsx)("path",{d:"M19.0711 4.92893C18.0408 3.89861 16.7977 3.1059 15.429 2.60627C14.0602 2.10664 12.5988 1.91216 11.147 2.03644C9.69527 2.16073 8.28819 2.60077 7.02428 3.32578C5.76037 4.05078 4.67016 5.04324 3.82996 6.23368L6.10143 7.83686C6.70803 6.97739 7.49513 6.26086 8.40765 5.73742C9.32016 5.21398 10.336 4.89628 11.3842 4.80655C12.4323 4.71682 13.4874 4.85723 14.4756 5.21795C15.4638 5.57868 16.3613 6.151 17.1051 6.89486L19.0711 4.92893Z",fill:"#EA4335"}),(0,s.jsx)("path",{d:"M3.83148 6.23153C2.84897 7.62282 2.23811 9.24201 2.05681 10.9356C1.87551 12.6291 2.12979 14.3409 2.79553 15.9087L5.3546 14.822C4.87395 13.6901 4.69037 12.4542 4.82126 11.2315C4.95215 10.0088 5.39318 8.83978 6.10252 7.8353L3.83148 6.23153Z",fill:"#FBBC05"}),(0,s.jsx)("path",{d:"M2.79207 15.9005C3.43992 17.4299 4.45853 18.7739 5.75591 19.811C7.05328 20.8481 8.58855 21.5457 10.2231 21.8409C11.8576 22.136 13.5399 22.0194 15.1181 21.5015C16.6962 20.9836 18.1205 20.0807 19.2624 18.8745L17.2432 16.9632C16.4189 17.8341 15.3906 18.4859 14.2512 18.8598C13.1118 19.2337 11.8972 19.3179 10.7171 19.1049C9.53702 18.8918 8.42859 18.3881 7.49192 17.6393C6.55524 16.8906 5.81983 15.9203 5.35209 14.8161L2.79207 15.9005Z",fill:"#33A852"}),(0,s.jsx)("path",{d:"M22 11H13V14H18.9372C18.8808 14.1956 18.8161 14.3891 18.7431 14.5799C18.4043 15.4654 17.8944 16.2755 17.2425 16.964L19.2613 18.8756C20.1642 17.922 20.8705 16.7999 21.3397 15.5734C21.7763 14.4323 21.9999 13.2215 22 12.0012V11Z",fill:"#4687F5"})]}))},u=t(70729),d=["children","isLoading","isDisabled","customStyles"];function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=function(e){var r=e.children,t=e.isLoading,o=e.isDisabled,i=e.customStyles,a=(0,n.Z)(e,d),l=function(e,r){var t=e?"center":r.justifyContent;return{button:p(p({},r),{},{justifyContent:t}),googleIcon:{fontSize:"23px",display:e?"none":"inline"}}}(t,i);return(0,s.jsx)(u.Z,p(p({sx:l.button,fullWidth:!0,startIcon:(0,s.jsx)(c,{sx:l.googleIcon}),loading:t,disabled:o||t},a),{},{children:r}))}}}]);
//# sourceMappingURL=1836-61a91e26bc520cda.js.map